# --- OS dependant settings

set( CPACK_PACKAGE_NAME ${CMAKE_PROJECT_NAME} )
set( CPACK_PACKAGE_VENDOR "Dolby.io" )
set( CPACK_RESOURCE_FILE_LICENSE ${CMAKE_SOURCE_DIR}/install/LICENSE.txt )
set( CPACK_PACKAGE_DESCRIPTION_SUMMARY "Package for ${CPACK_PACKAGE_NAME}" )
set( CPACK_PACKAGE_INSTALL_DIRECTORY ${CPACK_PACKAGE_NAME} )
set( CPACK_PACKAGE_VERSION_MAJOR ${PROJECT_VERSION_MAJOR} )
set( CPACK_PACKAGE_VERSION_MINOR ${PROJECT_VERSION_MINOR} )
set( CPACK_PACKAGE_VERSION_PATCH ${PROJECT_VERSION_PATCH} )
set( CPACK_VERBATIM_VARIABLES YES )

set( FILE_NAME ${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}-${CMAKE_SYSTEM_NAME} )

if( APPLE )
  set( CPACK_GENERATOR "TGZ" )
elseif( WIN32 )
  set( CPACK_GENERATOR "WIX" )
  set( CPACK_WIX_COMPONENT_INSTALL ON )
  set( CPACK_WIX_PRODUCT_ICON ${CMAKE_SOURCE_DIR}/resource/windows/millicast-logo-32.ico )
  set( CPACK_WIX_LICENSE_RTF ${CMAKE_SOURCE_DIR}/install/LICENSE.rtf )
  set( CPACK_WIX_PATCH_FILE ${CMAKE_CURRENT_SOURCE_DIR}/path_env_patch.xml )
elseif( UNIX )  
  set( CPACK_GENERATOR "DEB" )
  set( CPACK_DEBIAN_PACKAGE_NAME "${CPACK_PROJECT_NAME}" )
  set( CPACK_DEBIAN_PACKAGE_MAINTAINER "Dolby.io" )
  set( CPACK_DEBIAN_PACKAGE_ARCHITECTURE amd64 )
  set( CPACK_DEBIAN_PACKAGE_SHLIBDEPS ON ) # Generates automatically dependencies list
endif()

# --- Generic Settings
set( CPACK_PACKAGE_FILE_NAME ${FILE_NAME} )
include( CPack )
